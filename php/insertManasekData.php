<?php
// Perform database connection
$servername = "localhost:3307";
$username = "root";
$password = "";
$dbname = "ManasekDB";

// Create connection
$conn = new mysqli($servername, $username, $password, $dbname);

// Check connection
if ($conn->connect_error) {
    die("Connection failed: " . $conn->connect_error);
}

// Prepare SQL statement for insertion into Manasek table
$sql = "INSERT INTO Manasek (Name, DateDay, Description) VALUES (?, ?, ?)";

// Prepare and bind parameters
$stmt = $conn->prepare($sql);
$stmt->bind_param("sss", $name, $dateDay, $description);

// Data to insert
$activities = [
    "اليوم الثامن (يوم التروية)" => [
        ["أحرم بالحج", "إذا لم تكن محرماً من قبل، أحرم بالحج من المكان الذي أنت فيه."],
        ["توجه إلى منى", "بعد الإحرام، اذهب إلى منى."],
        ["أقم الصلوات في منى", "صلِّ صلوات الظهر والعصر والمغرب والعشاء قصراً دون جمع، وامكث في منى بقية اليوم."]
    ],
    "اليوم التاسع (يوم عرفة)" => [
        ["توجه إلى عرفة", "بعد شروق الشمس، اذهب إلى عرفة."],
        ["وقف في عرفة", "قف في عرفة من الظهر حتى غروب الشمس، وأدِّ صلاتي الظهر والعصر جمع تقديم وقصراً."],
        ["الدعاء والذكر", "اغتنم وقت الوقوف بالدعاء والذكر والاستغفار حتى غروب الشمس."],
        ["توجه إلى مزدلفة", "بعد غروب الشمس، اذهب إلى مزدلفة."],
        ["صلِّ المغرب والعشاء في مزدلفة", "اجمع صلاة المغرب والعشاء جمع تأخير وقصراً."],
        ["المبيت في مزدلفة", "امكث في مزدلفة وبت ليلتك هناك."]
    ],
    "اليوم العاشر (يوم النحر)" => [
        ["صلِّ الفجر في مزدلفة", "ابدأ يومك بأداء صلاة الفجر في مزدلفة."],
        ["اجمع الحصى", "قبل مغادرتك، اجمع الحصى لرمي الجمرات."],
        ["توجه إلى منى", "بعد صلاة الفجر، اذهب إلى منى."],
        ["ارم جمرة العقبة الكبرى", "ارمي جمرة العقبة الكبرى بسبع حصيات."],
        ["ذبح الهدي", "إن كان عليك هدي، قم بذبحه."],
        ["احلق أو قصر", "احلق رأسك أو قصر شعرك للتحلل الأول."],
        ["التحلل الأول", "بعد الحلق أو التقصير، تحلل التحلل الأول."],
        ["توجه إلى مكة", "اذهب إلى مكة لأداء طواف الإفاضة والسعي بين الصفا والمروة إذا كنت متمتعاً أو لم تسع من قبل."],
        ["عد إلى منى", "بعد الطواف والسعي، عد إلى منى وبت ليلتك هناك."]
    ],
    "اليوم الحادي عشر (أيام التشريق)" => [
        ["رمي الجمرات الثلاث", "بعد الزوال، ارمِ الجمرات الثلاث (الصغرى، الوسطى، الكبرى) بسبع حصيات لكل جمرة."],
        ["المبيت في منى", "امكث في منى وبت ليلتك هناك."]
    ],
    "اليوم الثاني عشر (أيام التشريق)" => [
        ["رمي الجمرات الثلاث", "بعد الزوال، ارمِ الجمرات الثلاث (الصغرى، الوسطى، الكبرى) بسبع حصيات لكل جمرة."],
        ["التحلل الثاني", "إذا كنت مستعجلاً، يمكنك التوجه إلى مكة بعد رمي الجمرات للتحلل الثاني وطواف الوداع."],
        ["المبيت في منى", "إن لم تكن مستعجلاً، امكث في منى وبت ليلتك هناك."]
    ],
    "اليوم الثالث عشر (أيام التشريق)" => [
        ["رمي الجمرات الثلاث", "بعد الزوال، ارمِ الجمرات الثلاث (الصغرى، الوسطى، الكبرى) بسبع حصيات لكل جمرة."],
        ["التحلل الثاني", "توجه إلى مكة للتحلل الثاني وطواف الوداع."],
        ["طواف الوداع", "قبل مغادرتك مكة، أتم طواف الوداع."]
    ]
];

// Insert data into the table
foreach ($activities as $day => $tasks) {
    // Extract DateDay from the day description
    $dateDay = trim(explode(' ', $day)[1]); // Extracting "الثامن", "التاسع", etc.
    
    foreach ($tasks as $task) {
        $name = trim($task[0]);
        $description = trim($task[1]);
        // Execute the insertion statement
        if ($stmt->execute() === TRUE) {
            echo "Row inserted successfully with Name: $name, DateDay: $dateDay, Description: $description<br>";
        } else {
            echo "Error: " . $sql . "<br>" . $conn->error;
        }
    }
}

// Close the statement and connection
$stmt->close();
$conn->close();
?>
